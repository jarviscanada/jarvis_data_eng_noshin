#! /bin/bash

#validate number of arguments
if [ "$#" -ne 5 ]; then
    echo "Illegal number of parameters"
    exit 1
fi

#store arguments in variables
hostname=$1
port=$2
db_name=$3
uname=$4
password=$5

#validate port number
if [ $port -ne 5432 ]; then
	echo "Please enter correct port number"
	exit 1
fi

#validate database name
if [ $db_name != "localhost" ]; then
	echo "Please enter correct database name"
	exit 1
fi

#validate user name
if [ $uname != "postgres" ]; then
        echo "Please enter correct user name"
        exit 1
fi

#validate password
if [ $password != "password" ]; then
        echo "Please enter correct password"
        exit 1
fi

#store CPU architecture information in a variable
lscpu_out=lscpu

#collecting hardware information
hostname=$(hostname -f)
cpu_number=$($lscpu_out |egrep 'CPU\(s\):'| awk '{print $2}' |sed 1q)
cpu_architecture=$($lscpu_out | egrep 'Architecture' |awk '{print $2}')
cpu_model=$($lscpu_out | egrep 'Model name:' | sed -n 's/^Model name: //p' | xargs)
cpu_mhz=$($lscpu_out | egrep 'CPU MHz:' | awk '{print $3}')
l2_cache=$($lscpu_out | egrep 'L2 cache:' | awk '{print $3}' | sed 's/[A-Za-z]*//g')
total_mem=$(grep MemTotal /proc/meminfo | awk '{print $2}')
timestamp=$(date -u '+%Y-%m-%d %H:%M:%S') #current timestamp in `2019-11-26 14:40:19` format

sql="INSERT INTO
